<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace等于mapper接口类的全限定名,这样实现对应 -->
<mapper namespace="com.ruoyi.core.mapper.SelectUserMapper">
    <resultMap id="studentImgRequst" type="aMarkSheet" autoMapping="true">
        <association property="student" javaType="selectUserVo">
            <result column="stuName" property="name"/>
            <result column="stuImg" property="img"/>
        </association>
    </resultMap>

    <resultMap id="teacherImgRequst" type="AExerciseTask" autoMapping="true">
        <association property="teacher" javaType="selectUserVo">
            <result column="teaName" property="name"/>
            <result column="teaImg" property="img"/>
        </association>
    </resultMap>
    <sql id="studentRequst">
        Select s.stu_id as stuId, e.avatar as stuImg,s.stu_name as stuName from student s left JOIN sys_user e ON e.user_id = s.user_id
    </sql>

    <sql id="teacherRequst">
        Select t.tea_id as teaId, e.avatar as teaImg,t.tea_name as teaName from teacher t left JOIN sys_user e ON e.user_id = t.user_id
    </sql>
    <select id="selectStudent" parameterType="list" resultMap="studentImgRequst" >
        <include refid="studentRequst" />
        <where>
            s.stu_id IN
            <foreach item="item" collection="list" open="(" separator="," close=")">
                #{item.stuId}
            </foreach>
        </where>
    </select>

    <select id="selectTeacher" parameterType="list" resultMap="teacherImgRequst" >
        <include refid="teacherRequst" />
        <where>
            t.tea_id IN
            <foreach item="item" collection="list" open="(" separator="," close=")">
                #{item.teaId}
            </foreach>
        </where>
    </select>
</mapper>
